!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.returnExports=e()}(this,function(){function t(t){var e=+t;return e!==e?e=0:0!==e&&e!==1/0&&e!==-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function e(t){var e=typeof t;return null===t||"undefined"===e||"boolean"===e||"number"===e||"string"===e}function n(t){var n,r,i;if(e(t))return t;if(r=t.valueOf,d(r)&&(n=r.call(t),e(n)))return n;if(i=t.toString,d(i)&&(n=i.call(t),e(n)))return n;throw new TypeError}function r(){}var i,o=Array.prototype,a=Object.prototype,u=Function.prototype,l=String.prototype,c=Number.prototype,s=o.slice,f=o.splice,p=(o.push,o.unshift),h=u.call,g=a.toString,d=function(t){return"[object Function]"===a.toString.call(t)},m=function(t){return"[object RegExp]"===a.toString.call(t)},v=function(t){return"[object Array]"===g.call(t)},y=function(t){return"[object String]"===g.call(t)},b=function(t){var e=g.call(t),n="[object Arguments]"===e;return n||(n=!v(t)&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&d(t.callee)),n},w=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}();i=w?function(t,e,n,r){!r&&e in t||Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(t,e,n,r){!r&&e in t||(t[e]=n)};var x=function(t,e,n){for(var r in e)a.hasOwnProperty.call(e,r)&&i(t,r,e[r],n)},S=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)},E=function(t){return t>>>0};x(u,{bind:function(t){var e=this;if(!d(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n=s.call(arguments,1),i=function(){if(this instanceof l){var r=e.apply(this,n.concat(s.call(arguments)));return Object(r)===r?r:this}return e.apply(t,n.concat(s.call(arguments)))},o=Math.max(0,e.length-n.length),a=[],u=0;o>u;u++)a.push("$"+u);var l=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(i);return e.prototype&&(r.prototype=e.prototype,l.prototype=new r,r.prototype=null),l}});var O,j,N,T,_,F=h.bind(a.hasOwnProperty);(_=F(a,"__defineGetter__"))&&(O=h.bind(a.__defineGetter__),j=h.bind(a.__defineSetter__),N=h.bind(a.__lookupGetter__),T=h.bind(a.__lookupSetter__));var C=function(){var t=[1,2],e=t.splice();return 2===t.length&&v(e)&&0===e.length}();x(o,{splice:function(){return 0===arguments.length?[]:f.apply(this,arguments)}},C);var D=function(){var t={};return o.splice.call(t,0,0,1),1===t.length}();x(o,{splice:function(e,n){if(0===arguments.length)return[];var r=arguments;return this.length=Math.max(t(this.length),0),arguments.length>0&&"number"!=typeof n&&(r=s.call(arguments),r.length<2?r.push(this.length-e):r[1]=t(n)),f.apply(this,r)}},!D);var M=1!==[].unshift(0);x(o,{unshift:function(){return p.apply(this,arguments),this.length}},M),x(Array,{isArray:v});var I=Object("a"),k="a"!==I[0]||!(0 in I),A=function(t){var e=!0,n=!0;return t&&(t.call("foo",function(t,n,r){"object"!=typeof r&&(e=!1)}),t.call([1],function(){"use strict";n="string"==typeof this},"x")),!!t&&e&&n};x(o,{forEach:function(t){var e=S(this),n=k&&y(this)?this.split(""):e,r=arguments[1],i=-1,o=n.length>>>0;if(!d(t))throw new TypeError;for(;++i<o;)i in n&&t.call(r,n[i],i,e)}},!A(o.forEach)),x(o,{map:function(t){var e=S(this),n=k&&y(this)?this.split(""):e,r=n.length>>>0,i=Array(r),o=arguments[1];if(!d(t))throw new TypeError(t+" is not a function");for(var a=0;r>a;a++)a in n&&(i[a]=t.call(o,n[a],a,e));return i}},!A(o.map)),x(o,{filter:function(t){var e,n=S(this),r=k&&y(this)?this.split(""):n,i=r.length>>>0,o=[],a=arguments[1];if(!d(t))throw new TypeError(t+" is not a function");for(var u=0;i>u;u++)u in r&&(e=r[u],t.call(a,e,u,n)&&o.push(e));return o}},!A(o.filter)),x(o,{every:function(t){var e=S(this),n=k&&y(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if(!d(t))throw new TypeError(t+" is not a function");for(var o=0;r>o;o++)if(o in n&&!t.call(i,n[o],o,e))return!1;return!0}},!A(o.every)),x(o,{some:function(t){var e=S(this),n=k&&y(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if(!d(t))throw new TypeError(t+" is not a function");for(var o=0;r>o;o++)if(o in n&&t.call(i,n[o],o,e))return!0;return!1}},!A(o.some));var R=!1;o.reduce&&(R="object"==typeof o.reduce.call("es5",function(t,e,n,r){return r})),x(o,{reduce:function(t){var e=S(this),n=k&&y(this)?this.split(""):e,r=n.length>>>0;if(!d(t))throw new TypeError(t+" is not a function");if(!r&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o++];break}if(++o>=r)throw new TypeError("reduce of empty array with no initial value")}for(;r>o;o++)o in n&&(i=t.call(void 0,i,n[o],o,e));return i}},!R);var U=!1;o.reduceRight&&(U="object"==typeof o.reduceRight.call("es5",function(t,e,n,r){return r})),x(o,{reduceRight:function(t){var e=S(this),n=k&&y(this)?this.split(""):e,r=n.length>>>0;if(!d(t))throw new TypeError(t+" is not a function");if(!r&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,o=r-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>o)return i;do o in n&&(i=t.call(void 0,i,n[o],o,e));while(o--);return i}},!U);var L=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);x(o,{indexOf:function(e){var n=k&&y(this)?this.split(""):S(this),r=n.length>>>0;if(!r)return-1;var i=0;for(arguments.length>1&&(i=t(arguments[1])),i=i>=0?i:Math.max(0,r+i);r>i;i++)if(i in n&&n[i]===e)return i;return-1}},L);var $=Array.prototype.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);x(o,{lastIndexOf:function(e){var n=k&&y(this)?this.split(""):S(this),r=n.length>>>0;if(!r)return-1;var i=r-1;for(arguments.length>1&&(i=Math.min(i,t(arguments[1]))),i=i>=0?i:r-Math.abs(i);i>=0;i--)if(i in n&&e===n[i])return i;return-1}},$);var H=!{toString:null}.propertyIsEnumerable("toString"),z=function(){}.propertyIsEnumerable("prototype"),P=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],J=P.length;x(Object,{keys:function(t){var e=d(t),n=b(t),r=null!==t&&"object"==typeof t,i=r&&y(t);if(!r&&!e&&!n)throw new TypeError("Object.keys called on a non-object");var o=[],a=z&&e;if(i||n)for(var u=0;u<t.length;++u)o.push(String(u));else for(var l in t)a&&"prototype"===l||!F(t,l)||o.push(String(l));if(H)for(var c=t.constructor,s=c&&c.prototype===t,f=0;J>f;f++){var p=P[f];s&&"constructor"===p||!F(t,p)||o.push(p)}return o}});var Z=Object.keys&&function(){return 2===Object.keys(arguments).length}(1,2),B=Object.keys;x(Object,{keys:function(t){return B(b(t)?o.slice.call(t):t)}},!Z);var G=-621987552e5,V="-000001",q=Date.prototype.toISOString&&-1===new Date(G).toISOString().indexOf(V);x(Date.prototype,{toISOString:function(){var t,e,n,r,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(r=this.getUTCFullYear(),i=this.getUTCMonth(),r+=Math.floor(i/12),i=(i%12+12)%12,t=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],r=(0>r?"-":r>9999?"+":"")+("00000"+Math.abs(r)).slice(r>=0&&9999>=r?-4:-6),e=t.length;e--;)n=t[e],10>n&&(t[e]="0"+n);return r+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}},q);var W=!1;try{W=Date.prototype.toJSON&&null===new Date(0/0).toJSON()&&-1!==new Date(G).toJSON().indexOf(V)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(Y){}W||(Date.prototype.toJSON=function(){var t,e=Object(this),r=n(e);if("number"==typeof r&&!isFinite(r))return null;if(t=e.toISOString,"function"!=typeof t)throw new TypeError("toISOString property is not callable");return t.call(e)});var X=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),K=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z")),Q=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));(!Date.parse||Q||K||!X)&&(Date=function(t){function e(n,r,i,o,a,u,l){var c=arguments.length;if(this instanceof t){var s=1===c&&String(n)===n?new t(e.parse(n)):c>=7?new t(n,r,i,o,a,u,l):c>=6?new t(n,r,i,o,a,u):c>=5?new t(n,r,i,o,a):c>=4?new t(n,r,i,o):c>=3?new t(n,r,i):c>=2?new t(n,r):c>=1?new t(n):new t;return s.constructor=e,s}return t.apply(this,arguments)}function n(t,e){var n=e>1?1:0;return o[e]+Math.floor((t-1969+n)/4)-Math.floor((t-1901+n)/100)+Math.floor((t-1601+n)/400)+365*(t-1970)}function r(e){return Number(new t(1970,0,1,0,0,0,e))}var i=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),o=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var a in t)e[a]=t[a];return e.now=t.now,e.UTC=t.UTC,e.prototype=t.prototype,e.prototype.constructor=e,e.parse=function(e){var o=i.exec(e);if(o){var a,u=Number(o[1]),l=Number(o[2]||1)-1,c=Number(o[3]||1)-1,s=Number(o[4]||0),f=Number(o[5]||0),p=Number(o[6]||0),h=Math.floor(1e3*Number(o[7]||0)),g=Boolean(o[4]&&!o[8]),d="-"===o[9]?1:-1,m=Number(o[10]||0),v=Number(o[11]||0);return(f>0||p>0||h>0?24:25)>s&&60>f&&60>p&&1e3>h&&l>-1&&12>l&&24>m&&60>v&&c>-1&&c<n(u,l+1)-n(u,l)&&(a=60*(24*(n(u,l)+c)+s+m*d),a=1e3*(60*(a+f+v*d)+p)+h,g&&(a=r(a)),a>=-864e13&&864e13>=a)?a:0/0}return t.parse.apply(this,arguments)},e}(Date)),Date.now||(Date.now=function(){return(new Date).getTime()});var te=c.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0)),ee={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(t,e){for(var n=-1;++n<ee.size;)e+=t*ee.data[n],ee.data[n]=e%ee.base,e=Math.floor(e/ee.base)},divide:function(t){for(var e=ee.size,n=0;--e>=0;)n+=ee.data[e],ee.data[e]=Math.floor(n/t),n=n%t*ee.base},numToString:function(){for(var t=ee.size,e="";--t>=0;)if(""!==e||0===t||0!==ee.data[t]){var n=String(ee.data[t]);""===e?e=n:e+="0000000".slice(0,7-n.length)+n}return e},pow:function he(t,e,n){return 0===e?n:e%2===1?he(t,e-1,n*t):he(t*t,e/2,n)},log:function(t){for(var e=0;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e}};x(c,{toFixed:function(t){var e,n,r,i,o,a,u,l;if(e=Number(t),e=e!==e?0:Math.floor(e),0>e||e>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=Number(this),n!==n)return"NaN";if(-1e21>=n||n>=1e21)return String(n);if(r="",0>n&&(r="-",n=-n),i="0",n>1e-21)if(o=ee.log(n*ee.pow(2,69,1))-69,a=0>o?n*ee.pow(2,-o,1):n/ee.pow(2,o,1),a*=4503599627370496,o=52-o,o>0){for(ee.multiply(0,a),u=e;u>=7;)ee.multiply(1e7,0),u-=7;for(ee.multiply(ee.pow(10,u,1),0),u=o-1;u>=23;)ee.divide(1<<23),u-=23;ee.divide(1<<u),ee.multiply(1,1),ee.divide(2),i=ee.numToString()}else ee.multiply(0,a),ee.multiply(1<<-o,0),i=ee.numToString()+"0.00000000000000000000".slice(2,2+e);return e>0?(l=i.length,i=e>=l?r+"0.0000000000000000000".slice(0,e-l+2)+i:r+i.slice(0,l-e)+"."+i.slice(l-e)):i=r+i,i}},te);var ne=l.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var t=void 0===/()??/.exec("")[1];l.split=function(e,n){var r=this;if(void 0===e&&0===n)return[];if("[object RegExp]"!==g.call(e))return ne.call(this,e,n);var i,a,u,l,c=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),f=0;for(e=new RegExp(e.source,s+"g"),r+="",t||(i=new RegExp("^"+e.source+"$(?!\\s)",s)),n=void 0===n?-1>>>0:E(n);(a=e.exec(r))&&(u=a.index+a[0].length,!(u>f&&(c.push(r.slice(f,a.index)),!t&&a.length>1&&a[0].replace(i,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(a[t]=void 0)}),a.length>1&&a.index<r.length&&o.push.apply(c,a.slice(1)),l=a[0].length,f=u,c.length>=n)));)e.lastIndex===a.index&&e.lastIndex++;return f===r.length?(l||!e.test(""))&&c.push(""):c.push(r.slice(f)),c.length>n?c.slice(0,n):c}}():"0".split(void 0,0).length&&(l.split=function(t,e){return void 0===t&&0===e?[]:ne.call(this,t,e)});var re=l.replace,ie=function(){var t=[];return"x".replace(/x(.)?/g,function(e,n){t.push(n)}),1===t.length&&"undefined"==typeof t[0]}();ie||(l.replace=function(t,e){var n=d(e),r=m(t)&&/\)[*?]/.test(t.source);if(n&&r){var i=function(n){var r=arguments.length,i=t.lastIndex;t.lastIndex=0;var o=t.exec(n)||[];return t.lastIndex=i,o.push(arguments[r-2],arguments[r-1]),e.apply(this,o)};return re.call(this,t,i)}return re.call(this,t,e)});var oe=l.substr,ae="".substr&&"b"!=="0b".substr(-1);x(l,{substr:function(t,e){return oe.call(this,0>t&&(t=this.length+t)<0?0:t,e)}},ae);var ue="	\n\f\r   ᠎             　\u2028\u2029﻿",le="​",ce="["+ue+"]",se=new RegExp("^"+ce+ce+"*"),fe=new RegExp(ce+ce+"*$"),pe=l.trim&&(ue.trim()||!le.trim());x(l,{trim:function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(se,"").replace(fe,"")}},pe),(8!==parseInt(ue+"08")||22!==parseInt(ue+"0x16"))&&(parseInt=function(t){var e=/^0[xX]/;return function(n,r){return n=String(n).trim(),Number(r)||(r=e.test(n)?16:10),t(n,r)}}(parseInt))}),function(t,e){function n(t,e){var n=t.createElement("p"),r=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var t=b.elements;return"string"==typeof t?t.split(" "):t}function i(t,e){var n=b.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof t&&(t=t.join(" ")),b.elements=n+" "+t,c(e)}function o(t){var e=y[t[m]];return e||(e={},v++,t[m]=v,y[v]=e),e}function a(t,n,r){if(n||(n=e),f)return n.createElement(t);r||(r=o(n));var i;return i=r.cache[t]?r.cache[t].cloneNode():d.test(t)?(r.cache[t]=r.createElem(t)).cloneNode():r.createElem(t),!i.canHaveChildren||g.test(t)||i.tagUrn?i:r.frag.appendChild(i)}function u(t,n){if(t||(t=e),f)return t.createDocumentFragment();n=n||o(t);for(var i=n.frag.cloneNode(),a=0,u=r(),l=u.length;l>a;a++)i.createElement(u[a]);return i}function l(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return b.shivMethods?a(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-:]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(b,e.frag)}function c(t){t||(t=e);var r=o(t);return!b.shivCSS||s||r.hasCSS||(r.hasCSS=!!n(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),f||l(t,r),t}var s,f,p="3.7.2",h=t.html5||{},g=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,d=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",v=0,y={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",s="hidden"in t,f=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){s=!0,f=!0}}();var b={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:p,shivCSS:h.shivCSS!==!1,supportsUnknownElements:f,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:c,createElement:a,createDocumentFragment:u,addElements:i};t.html5=b,c(e)}(this,document);var riot={version:"v2.0.1"};riot.observable=function(t){var e={};return t.on=function(n,r){return"function"==typeof r&&n.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(r),r.typed=n>0}),t},t.off=function(n,r){if("*"==n)e={};else if(r)for(var i,o=e[n],a=0;i=o&&o[a];++a)i==r&&(o.splice(a,1),a--);else n.replace(/\S+/g,function(t){e[t]=[]});return t},t.one=function(e,n){return n&&(n.one=1),t.on(e,n)},t.trigger=function(n){for(var r,i=[].slice.call(arguments,1),o=e[n]||[],a=0;r=o[a];++a)r.busy||(r.busy=1,r.apply(t,r.typed?[n].concat(i):i),r.one&&(o.splice(a,1),a--),r.busy=0);return t},t},function(t,e){function n(){return i.hash.slice(1)}function r(t){t.type&&(t=n()),t!=a&&(o.trigger.apply(null,["H"].concat(t.split("/"))),a=t)}if(this.top){var i=location,o=t.observable({}),a=n(),u=window,l=t.route=function(t){t[0]?(i.hash=t,r(t)):o.on("H",t)};l.exec=function(t){t.apply(null,n().split("/"))},u.addEventListener?u.addEventListener(e,r,!1):u.attachEvent("on"+e,r)}}(riot,"hashchange"),riot._tmpl=function(){function t(t,n){return n=(t||"{}").replace(/\\{/g,"￰").replace(/\\}/g,"￱").split(/({[\s\S]*?})/),new Function("d","return "+(n[0]||n[2]?"["+n.map(function(t,n){return n%2?e(t,1):'"'+t.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':e(n[1])).replace(/\uFFF0/g,"{").replace(/\uFFF1/g,"}"))}function e(t,e){return t=t.replace(/\n/g," ").replace(/^[{ ]+|[ }]+$|\/\*.+?\*\//g,""),/^\s*[\w-"']+ *:/.test(t)?"["+t.replace(/\W*([\w-]+)\W*:([^,]+)/g,function(t,r,i){return i.replace(/\w[^,|& ]*/g,function(t){return n(t,e)})+'?"'+r+'":"",'})+'].join(" ")':n(t,e)}function n(t,e){return"(function(v){try{v="+(t.replace(i,function(t,e,n){return n?"d."+n:t})||"x")+"}finally{return "+(e?'!v&&v!==0?"":v':"v")+"}}).call(d)"}var r={},i=/("|').+?[^\\]\1|\.\w*|\w*:|\b(?:this|true|false|null|new|typeof|Number|String|Object|Array|Math|Date)\b|([a-z_]\w*)/gi;return function(e,n){return e&&(r[e]=r[e]||t(e))(n)}}(),function(t,e){function n(t,e){for(var n=0;n<(t||[]).length;n++)e(t[n],n)===!1&&n--}function r(t,e){return e&&Object.keys(e).map(function(n){t[n]=e[n]}),t}function i(t,e){return t.filter(function(t){return e.indexOf(t)<0})}function o(t,e){for(t=e(t)===!1?t.nextSibling:t.firstChild;t;)o(t,e),t=t.nextSibling}function a(t){var n=e.createElement("div");return n.innerHTML=t,n}function u(t,e){e.trigger("update"),n(t,function(t){function n(t){i.removeAttribute(t)}var r=t.tag,i=t.dom;if(t.loop)return n("each"),s(t,e);if(r)return r.update?r.update():t.tag=c({tmpl:r[0],fn:r[1],root:i,parent:e});var o=t.attr,a=f(t.expr,e);if(null==a&&(a=""),t.value!==a){if(t.value=a,!o)return i.nodeValue=a;if((!a&&t.bool||/obj|func/.test(typeof a))&&n(o),"function"==typeof a)i[o]=function(t){t=t||window.event,t.which=t.which||t.charCode||t.keyCode,t.target=t.target||t.srcElement,t.currentTarget=i,t.item=e.__item||e,a.call(e,t)!==!0&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1),e.update()};else if(/^(show|hide|if)$/.test(o))n(o),"hide"==o&&(a=!a),i.style.display=a?"":"none";else{if(t.bool){if(!a)return;a=o}i.setAttribute(o,a)}}}),e.trigger("updated")}function l(t){var e={},i=[];return o(t,function(t){function o(e,n){if(e?e.indexOf("{")>=0:n){var o={dom:t,expr:e};i.push(r(o,n||{}))}}var a=t.nodeType,u=t.nodeValue;if(3==a&&"STYLE"!=t.parentNode.tagName)o(u);else if(1==a){if(u=t.getAttribute("each"))return o(u,{loop:1}),!1;var l=h[t.tagName.toLowerCase()];n(t.attributes,function(n){var r=n.name,i=n.value;if(/^(name|id)$/.test(r)&&(e[i]=t),!l){var a=r.split("__")[1];if(o(i,{attr:a||r,bool:a}),a)return t.removeAttribute(r),!1}}),l&&o(0,{tag:l})}}),{expr:i,elem:e}}function c(i){function o(){Object.keys(v).map(function(t){var e=c[t]=f(v[t],g||m);"object"==typeof e&&h.removeAttribute(t)})}var c=i.opts||{},s=a(i.tmpl),h=i.root,g=i.parent,d=l(s),m={root:h,opts:c,parent:g,__item:i.item},v={};for(r(m,d.elem),n(h.attributes,function(t){v[t.name]=t.value}),o(),m.on||(t.observable(m),delete m.off),i.fn&&i.fn.call(m,c),m.update=function(t,n){return g&&s&&!s.firstChild&&(h=g.root,s=null),n||e.body.contains(h)?(r(m,t),r(m,m.__item),o(),u(d.expr,m),!n&&m.__item&&g.update(),!0):void m.trigger("unmount")},m.update(0,!0);s.firstChild;)i.before?h.insertBefore(s.firstChild,i.before):h.appendChild(s.firstChild);return m.trigger("mount"),p.push(m),m}function s(t,e){function n(){return Array.prototype.indexOf.call(o.childNodes,l)+1}if(!t.done){t.done=!0;var r,o,a,u=t.dom,l=u.previousSibling,o=u.parentNode,s=u.outerHTML,p=t.expr,h=p.split(/\s+in\s+/),g=[];h[1]&&(p="{ "+h[1],a=h[0].slice(1).trim().split(/,\s*/)),e.one("mount",function(){var t=u.parentNode;t&&(o=t,o.removeChild(u))}),e.on("updated",function(){var t=f(p,e);if(is_array=Array.isArray(t),is_array)t=t.slice(0);else{if(!t)return;var u=JSON.stringify(t);if(u==r)return;r=u,t=Object.keys(t).map(function(e){var n={};return n[a[0]]=e,n[a[1]]=t[e],n})}i(g,t).map(function(t){var e=g.indexOf(t);o.removeChild(o.childNodes[n()+e]),g.splice(e,1)}),i(t,g).map(function(i,u){var l=t.indexOf(i);if(a&&!r){var f={};f[a[0]]=i,f[a[1]]=u,i=f}var p=c({before:o.childNodes[n()+l],parent:e,tmpl:s,item:i,root:o});e.on("update",function(){p.update(0,!0)})}),g=t})}}var f=t._tmpl,p=[],h={};t.tag=function(t,e,n){n=n||noop,h[t]=[e,n]},t.mountTo=function(t,e,n){var r=h[e];return r&&c({tmpl:r[0],fn:r[1],root:t,opts:n})},t.mount=function(r,i){"*"==r&&(r=Object.keys(h).join(", "));var o=[];return n(e.querySelectorAll(r),function(e){if(!e.riot){var n=e.tagName.toLowerCase(),r=t.mountTo(e,n,i);r&&(o.push(r),e.riot=1)}}),o},t.update=function(){return p=p.filter(function(t){return!!t.update()})}}(riot,document);